function set_w7x_campos( camera, varargin)
%SET_W7X_CAMPOS Set current view to a specific W7-X camera view
%   The SET_W7X_CAMPOS routine sets the currnent Matlab camera view to that
%   of a given W7-X camera.  Avaiable cameras are: AEQXX, AEAXX, AEAXXmir,
%   AEEXX, AEEXXmir, End50, End51, AEFXX, AEFXXvisA, AEFXXvisB.
%
%   Usage:
%       set_w7x_campos('AEQ10');
%       set_w7x_campos('End50','plot'); % Make a cone plot
%
%   Created by: S. Lazerson (lazerson@pppl.gov)
%   Version:    1.0
%   Date:       11/14/17

% Defaults
lplot=0;
a_cam = 32.21906432; % default OP1.1 AEV30 optimized

% Check varargin
if nargin > 1
    for i=1:nargin-1
        switch varargin{i}
            case 'plot'
                lplot=1;
        end
    end
end

switch camera
    case('AEQ10')
        p0=[6.375480 -0.271898 -0.655677];
        nvec=[-0.672896 -0.930265 0.176362];
        rvec=[-0.065619 0.338947 -0.983350];
    case('AEQ20')
        p0=[2.228722 5.979421 -0.655677];
        nvec=[0.676798 -0.927430 0.176362];
        rvec=[-0.342635 0.042333 -0.983350];
    case('AEQ30')
        p0=[-4.998054 3.967383 -0.655677];
        nvec=[1.091180 0.357082 0.176362];
        rvec=[-0.146141 -0.312784 -0.983350];
        a_cam = 32.21906432;
    case{'AEV30_op11','AEQ21_op11'}
        p0=[1.69477886 6.12453262 0.64880745];
        nvec=[-0.91206066 -0.37672560 -0.16193573];
        rvec=[-0.24104390  0.17308427  0.95495532];
        a_cam = 32.21906432;
    case('AEQ40')
        p0=[-5.317689 -3.527443 -0.655677];
        nvec=[-0.002412 1.148118 0.176362];
        rvec=[0.252315 -0.235644 -0.983350];
    case('AEQ50')
        p0=[1.711541 -6.147463 -0.655677];
        nvec=[-1.092671 0.352494 0.176362];
        rvec=[0.302080 0.167148 -0.983350];
    case('AEQ11')
        p0=[ 6.377159 0.229154 0.655677];
        nvec=[-0.632764 0.753994 -0.176362];
        rvec=[-0.079175 0.163564 0.983350];
    case('AEQ21')
        p0=[1.752712 6.135851 0.655677];
        nvec=[-0.912625 -0.368797 -0.176362];
        rvec=[-0.180025 -0.024756 0.983350];
    case('AEQ21_op12b')
        p0=[1.69477886 6.12453262 0.64880745];
        nvec=[-0.91206066 -0.37672560 -0.16193573];
        rvec = [ -3.9042073515E-01    8.6202617879E-01    1.9353396536E-01];
        a_cam = 31.2194;
    case('AEQ31')
        p0=[-5.293924 3.563010 0.655677];
        nvec=[0.068730 -0.981923 -0.176362];
        rvec=[-0.032087 -0.178864 0.983350];
    case('AEQ41')
        p0=[-5.024537 -3.933790 0.655677];
        nvec=[0.955103 -0.238065 -0.176362];
        rvec=[0.160194 -0.085788 0.983350];
    case('AEQ51')
        p0=[2.188589 -5.994226 0.655677];
        nvec=[0.521556 0.834791 -0.176362];
        rvec=[0.131092 0.125844 0.983350];
    case('End50')
        p0=[1.068506 -6.211475 0.428210];
        nvec=[-0.243954 1.143162 -1.635780];
        %rvec=[-0.169805 0.795702 0.581399];
        rvec=[1.9662    0.4196   -0.0000];
        a_cam = 115;
    case('End51')
        p0=[2.739228 -5.676333 -0.428210];
        nvec=[-0.549602 1.031635 1.635780];
        %rvec=[-0.382552 0.718073 -0.581399];
        rvec=[-1.7744   -0.9453   -0.0000];
        a_cam = 115;
    case('AEA11')
        p0=[6.653800 0.056000 0.443000];
        nvec=[-1.714500 0.000000 0.000000];
        rvec=[0.000000 1.000000 0.000000];
    case('AEA11mir')
        p0=[6.603800 0.056000 0.454000];
        nvec=[-0.965926 0.000000 -0.258819];
        rvec=[-0.258819 0.000000 0.965926];
    case('AEA51')
        p0=[2.005100 -6.039500 -0.343000];
        nvec=[-0.525200 1.547300 0.000000];
        rvec=[0.946937 0.321419 0.000000];
    case('AEA51mir')
        p0=[1.987200 -5.990000 -0.454000];
        nvec=[-0.511739 1.507643 -0.367571];
        rvec=[-0.072304 0.213014 0.974370];
    case('AEE51')
        p0=[2.804800 -6.352300 -0.443000];
        nvec=[-0.734500 1.616500 0.000000];
        rvec=[0.910424 0.413676 0.000000];
    case('AEE51mir')
        p0=[2.780000 -6.297100 -0.353800];
        nvec=[-0.715675 1.575069 -0.399411];
        rvec=[-0.093057 0.204801 0.974370];
    case('AEE10')
        p0=[6.604800 -0.800500 0.343000];
        nvec=[-1.692300 0.219300 0.000000];
        rvec=[0.128512 0.991708 0.000000];
    case('AEE10mir')
        p0=[6.554500 -0.793800 0.353800];
        nvec=[-1.648926 0.213679 -0.383868];
        rvec=[-0.223086 0.028909 0.974370];
    case('AEF10')
        p0=[6.311301 -0.864737 0.424719];
        nvec=[-0.537120 0.387760 -0.749090];
        rvec=[0.585332 0.810794 0.000000];
        a_cam = 115;
    case('AEF11')
        p0=[6.311301 0.864737 -0.424719];
        nvec=[-0.537120 -0.387760 0.749090];
        rvec=[0.585332 -0.810794 0.000000];
        a_cam = 115;
    case('AEF20')
        p0=[2.772714 5.735186 0.424719];
        nvec=[-0.534760 -0.391010 -0.749090];
        rvec=[-0.590237 0.807230 0.000000];
        a_cam = 115;
    case('AEF21')
        p0=[1.127885 6.269623 -0.424719];
        nvec=[0.202800 -0.630660 0.749090];
        rvec=[0.951990 0.306129 0.000000];
        a_cam = 115;
    case('AEF30')
        p0=[-4.597670 4.409277 0.424719];
        nvec=[0.206630 -0.629410 -0.749090];
        rvec=[-0.950111 -0.311913 0.000000];
        a_cam = 115;
    case('AEF31')
        p0=[-5.614230 3.010103 -0.424719];
        nvec=[0.662460 -0.002010 0.749090];
        rvec=[0.003034 0.999995 0.000000];
        a_cam = 115;
    case('AEF40')
        p0=[-5.614230 -3.010103 0.424719];
        nvec=[0.662460 0.002010 -0.749090];
        rvec=[0.003034 -0.999995 0.000000];
        a_cam = 115;
    case('AEF41')
        p0=[-4.597670 -4.409277 -0.424719];
        nvec=[0.206630 0.629410 0.749090];
        rvec=[-0.950111 0.311913 0.000000];
        a_cam = 115;
    case('AEF10visA')
        p0=[6.345086 -0.952012 0.381483];
        nvec=[-0.537120 0.387710 -0.749120];
        rvec=[ 0.585282 0.810830 0.000000];
        a_cam = 135;
    case('AEF11visA')
        p0=[ 6.345086 0.952012 -0.381483];
        nvec=[-0.537120 -0.387710 0.749120];
        rvec=[-0.585282 0.810830 0.000000];
        a_cam = 135;
    case('AEF20visA')
        p0=[2.866156 5.740348 0.381483];
        nvec=[-0.534710 -0.391020 -0.749120];
        rvec=[-0.590283 0.807197 0.000000];
        a_cam = 135;
    case('AEF21visA')
        p0=[1.055323 6.328723 -0.381483];
        nvec=[0.202750 -0.630640 0.749120];
        rvec=[-0.952009 -0.306070 0.000000];
        a_cam = 135;
    case('AEF30visA')
        p0=[-4.573704 4.499742 0.381483];
        nvec=[ 0.206650 -0.629370 -0.749120];
        rvec=[-0.950096 -0.311958 0.000000];
        a_cam = 135;
    case('AEF31visA')
        p0=[-5.692861 2.959354 -0.381483];
        nvec=[0.662430 -0.002050 0.749120];
        rvec=[ -0.003095 -0.999995 0.000000];
        a_cam = 135;
    case('AEF40visA')
        p0=[-5.692861 -2.959354 0.381483];
        nvec=[0.662430 0.002050 -0.749120];
        rvec=[0.003095 -0.999995 0.000000];
        a_cam = 135;
    case('AEF41visA')
        p0=[-4.573704 -4.499742 -0.381483];
        nvec=[0.206650 0.629370 0.749120];
        rvec=[0.950096 -0.311958 0.000000];
        a_cam = 135;
    case('AEF10visB')
        p0=[6.263174 -0.954813 0.438770];
        nvec=[-0.537170 0.387690 -0.749090];
        rvec=[0.585227 0.810870 0.000000];
        a_cam = 135;
    case('AEF11visB')
        p0=[6.263174 0.954813 -0.438770];
        nvec=[-0.537170 -0.387690 0.749090];
        rvec=[-0.585227 0.810870 0.000000];
        a_cam = 135;
    case('AEF20visB')
        p0=[2.843508 5.661579 0.438770];
        nvec=[-0.534710 -0.391080 -0.749090];
        rvec=[-0.590342 0.807153 0.000000];
        a_cam = 135;
    case('AEF21visB')
        p0=[1.027346 6.251686 -0.438770];
        nvec=[0.202720 -0.630680 0.749090];
        rvec=[-0.952028 -0.306011 0.000000];
        a_cam = 135;
    case('AEF30visB')
        p0=[-4.505789 4.453861 0.438770];
        nvec=[0.206700 -0.629390 -0.749090];
        rvec=[-0.950076 -0.312018 0.000000];
        a_cam = 135;
    case('AEF31visB')
        p0=[-5.628239 2.908941 -0.438770];
        nvec=[0.662460 -0.002090 0.749090];
        rvec=[-0.003155 -0.999995 0.000000];
        a_cam = 135;
    case('AEF40visB')
        p0=[-5.628239 -2.908941 0.438770];
        nvec=[0.662460 0.002090 -0.749090];
        rvec=[0.003155 -0.999995 0.000000];
        a_cam = 135;
    case('AEF41visB')
        p0=[-4.505789 -4.453861 -0.438770];
        nvec=[0.206700 0.629390 0.749090];
        rvec=[0.950076 -0.312018 0.000000];
        a_cam = 135;
    case('AEH51') % Glen's Scraper Cam OP1.2b
        p0=[3.525888 -5.468221 0.210995];
        %nvec=[-0.5392 -0.6882 2.0670];
        nvec=[-2.7323130405E-01   9.1643660861E-01   2.9238433078E-01];
        rvec=[-0.91644     -0.27323           0];
end

if lplot
    %quiver3(p0(1),p0(2),p0(3),nvec(1),nvec(2),nvec(3),'k');
    pvec=cross(nvec,rvec);
    nvec = nvec./sqrt(sum(nvec.*nvec));
    nvec = nvec.*3;
    ncone=64;
    vertex=[]; faces=[];
    rho = sind(a_cam);
    for i=1:ncone
        th1=2.*pi.*(i-1)./(ncone);
        th2=2.*pi.*(i)./(ncone);
        x1=rho*cos(th1); y1=rho*sin(th1);
        x2=rho*cos(th2); y2=rho*sin(th2);
        vertex=[vertex;...
            p0;
            p0+nvec+x1.*rvec+y1.*pvec;
            p0+nvec+x2.*rvec+y2.*pvec];
        faces=[faces; 3.*(i-1)+[1 2 3]];
    end
    patch('Faces',faces,'Vertices',vertex,'FaceColor','blue','LineStyle','none');
else
    campos(p0);
    camtarget(p0+nvec);
    camup(-cross(nvec,rvec));
    camva(a_cam);
    camproj perspective
    axis equal;
end

end
